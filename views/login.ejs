<%- include('partials/header') %>
    <div class="page-header">
        <div class="breadcrumb"><a href="/">Ana Sayfa</a> <span>→</span> <span>Giriş / Kayıt</span></div>
        <h1>Hesap</h1>
    </div>
    <section class="section" style="max-width:500px;margin:0 auto;">
        <div class="panel-card">
            <div style="display:flex;gap:8px;margin-bottom:24px;">
                <button class="btn" id="tabLogin" onclick="switchTab('login')">Giriş Yap</button>
                <button class="btn btn-outline" id="tabRegister" onclick="switchTab('register')">Kayıt Ol</button>
            </div>
            <div class="auth-error" id="authError"
                style="display:none;background:var(--red-light);color:var(--red);padding:10px 14px;border-radius:8px;font-size:12px;font-weight:600;margin-bottom:16px;">
            </div>
            <form id="loginForm" onsubmit="doLogin(event)">
                <div class="form-group"><label>E-posta</label><input type="email" id="loginEmail" required /></div>
                <div class="form-group"><label>Şifre</label><input type="password" id="loginPassword" required /></div>
                <button class="btn btn-lg btn-block" type="submit">Giriş Yap</button>
            </form>
            <form id="registerForm" onsubmit="doRegister(event)" style="display:none;">
                <div class="form-group"><label>Ad Soyad</label><input type="text" id="regName" required /></div>
                <div class="form-group"><label>E-posta</label><input type="email" id="regEmail" required /></div>
                <div class="form-group"><label>Telefon</label><input type="tel" id="regPhone"
                        placeholder="05XX XXX XXXX" /></div>
                <div class="form-group"><label>Şifre (min 6 karakter)</label><input type="password" id="regPassword"
                        required minlength="6" /></div>
                <button class="btn btn-lg btn-block" type="submit">Kayıt Ol</button>
            </form>
        </div>
    </section>
    <script>
        function switchTab(t) { document.getElementById('loginForm').style.display = t === 'login' ? 'block' : 'none'; document.getElementById('registerForm').style.display = t === 'register' ? 'block' : 'none'; document.getElementById('tabLogin').className = t === 'login' ? 'btn' : 'btn btn-outline'; document.getElementById('tabRegister').className = t === 'register' ? 'btn' : 'btn btn-outline'; document.getElementById('authError').style.display = 'none'; }
        async function doLogin(e) { e.preventDefault(); const r = await fetch('/api/auth/login', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ email: document.getElementById('loginEmail').value, password: document.getElementById('loginPassword').value }) }); const d = await r.json(); if (d.error) { document.getElementById('authError').textContent = d.error; document.getElementById('authError').style.display = 'block'; } else window.location.href = '/'; }
        async function doRegister(e) { e.preventDefault(); const r = await fetch('/api/auth/register', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ name: document.getElementById('regName').value, email: document.getElementById('regEmail').value, phone: document.getElementById('regPhone').value, password: document.getElementById('regPassword').value }) }); const d = await r.json(); if (d.error) { document.getElementById('authError').textContent = d.error; document.getElementById('authError').style.display = 'block'; } else window.location.href = '/'; }
    </script>
    <%- include('partials/footer') %>