<%- include('layout') %>

    <div class="stats">
        <div class="stat">
            <div class="stat-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 7l9 4 9-4"/><path d="M3 7l9-4 9 4"/><path d="M3 7v10l9 4 9-4V7"/><path d="M12 11v10"/></svg></div>
            <div class="stat-title">Toplam Sipariş</div>
            <div class="stat-value">
                <%= stats.orders.total %>
            </div>
        </div>
        <div class="stat">
            <div class="stat-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 4h12"/><path d="M6 20h12"/><path d="M6 4v3a6 6 0 0 0 12 0V4"/><path d="M6 20v-3a6 6 0 0 1 12 0v3"/></svg></div>
            <div class="stat-title">Bekleyen Sipariş</div>
            <div class="stat-value">
                <%= stats.orders.pending || 0 %>
            </div>
        </div>
        <div class="stat">
            <div class="stat-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="8"/><path d="M12 8v8"/><path d="M9 11h6"/></svg></div>
            <div class="stat-title">Dekont Bekleyen</div>
            <div class="stat-value">
                <%= stats.orders.payment_waiting || 0 %>
            </div>
        </div>
        <div class="stat">
            <div class="stat-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 5h2l1 10h10l1-7H8"/><circle cx="10" cy="19" r="1"/><circle cx="17" cy="19" r="1"/></svg></div>
            <div class="stat-title">Toplam Ürün</div>
            <div class="stat-value">
                <%= stats.products.total %>
            </div>
        </div>
    </div>
    <div class="stats">
        <div class="stat">
            <div class="stat-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8z"/></svg></div>
            <div class="stat-title">Aktif Chat</div>
            <div class="stat-value">
                <%= stats.chats.active %>
            </div>
        </div>
        <div class="stat">
            <div class="stat-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 14a4 4 0 1 0-8 0"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2"/></svg></div>
            <div class="stat-title">Kayıtlı Üye</div>
            <div class="stat-value">
                <%= stats.users.total %>
            </div>
        </div>
        <div class="stat">
            <div class="stat-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 9v4"/><path d="M12 17h.01"/><path d="m10.29 3.86-8.18 14.14A1 1 0 0 0 3 20h18a1 1 0 0 0 .87-1.5L13.71 3.86a1 1 0 0 0-1.71 0z"/></svg></div>
            <div class="stat-title">Düşük Stok</div>
            <div class="stat-value">
                <%= stats.products.low_stock || 0 %>
            </div>
        </div>
        <div class="stat">
            <div class="stat-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="5" width="18" height="14" rx="2"/><circle cx="12" cy="12" r="3"/><path d="M7 12h1m8 0h1"/></svg></div>
            <div class="stat-title">Toplam Ciro</div>
            <div class="stat-value">
                <%= stats.orders.revenue ? Number(stats.orders.revenue).toLocaleString('tr-TR') : '0' %> ₺
            </div>
        </div>
    </div>

    <div class="panel-grid">
        <div class="panel-card">
            <div class="card-header">Son Siparişler <a href="/panel/siparisler"
                    style="font-size:12px;color:var(--red);">Tümü →</a></div>
            <div class="card-list">
                <% recentOrders.forEach(o=> { %>
                    <div class="card-list-item"
                        style="padding: 16px; border-bottom: 1px solid var(--border-light); display: flex; align-items: center; justify-content: space-between;">
                        <div>
                            <div style="font-weight: 700; color: #1a1c1e;">
                                <%= o.order_no %>
                            </div>
                            <div style="font-size: 13px; color: var(--text-muted);">
                                <%= o.customer_name %>
                            </div>
                        </div>
                        <span
                            class="status <%= o.status==='delivered'?'success': (o.status==='cancelled'?'pending':'warn') %>">
                            <%= o.status==='pending' ?'Bekliyor':o.status==='confirmed'
                                ?'Onaylandı':o.status==='preparing' ?'Hazırlanıyor':o.status==='shipped'
                                ?'Kargoda':o.status==='delivered' ?'Teslim Edildi':'İptal' %>
                        </span>
                    </div>
                    <% }); %>
                        <% if(!recentOrders.length){ %>
                            <div style="padding: 24px; text-align: center; color: var(--text-muted);">Henüz sipariş yok
                            </div>
                            <% } %>
            </div>
        </div>

        <div class="panel-card">
            <div class="card-header">Hızlı Erişim</div>
            <div style="display:grid;gap:8px;">
                <a href="/panel/urunler" class="btn btn-outline btn-block" style="justify-content:flex-start;">Ürün Yönetimi</a>
                <a href="/panel/siparisler" class="btn btn-outline btn-block" style="justify-content:flex-start;">Siparişler</a>
                <a href="/panel/araclar" class="btn btn-outline btn-block" style="justify-content:flex-start;">Araç Yönetimi</a>
                <a href="/panel/destek" class="btn btn-outline btn-block" style="justify-content:flex-start;">Canlı Destek</a>
                <a href="/panel/ayarlar" class="btn btn-outline btn-block" style="justify-content:flex-start;">Ayarlar</a>
            </div>
        </div>
    </div>
